define("module/Checker",function(require,exports,module){function t(){this.state=-1,this.fns=[]}function n(){this.platforms=[]}function e(n){var e={init:null,checkIn:new t,checkInstall:new t,openClient:function(t){location.href=t},download:function(t){location.href=t||n.info.downloadUrl}};return e}function i(t,n,e,c){var o=t.platforms[c];if(!o)return void e(!1);var a=o.handler(n);a.checkIn.on(function(o){o?e(a):i(t,n,e,c+1)})}t.prototype.on=function(t){t&&(-1!=this.state?t(this.state):this.fns.push(t))},t.prototype.set=function(t){this.state=t,this.fns.length&&(this.fns.forEach(function(n){n(t)}),this.fns.length=0)},n.prototype.register=function(t,n){var i=e(this);i.id=t,this.platforms.push({id:t,handler:function(t){return setTimeout(function(){n(i,t)}),i}})},n.prototype.getChecker=function(t,n){var e=this;i(e,t,function(t){t&&t.init(),n(t)},0)};var c=new n;!function(){c.register("wx",function(n,e){n.readyEvent=new t,n.init=function(){window.WeixinJSBridge&&WeixinJSBridge.invoke?i():document.addEventListener("WeixinJSBridgeReady",i,!1)};var i=function(){n.readyEvent.set(1),WeixinJSBridge.invoke("getInstallState",{packageName:e.packageName,packageUrl:e.packageUrl},function(t){var e=t.err_msg,i=0;e.indexOf("get_install_state:yes")>-1&&(i=1),n.checkInstall.set(i)}),WeixinJSBridge.invoke("showToolbar",{},function(t){})},c=function(){n.checkIn.set(/MicroMessenger/gi.test(navigator.userAgent)?1:0)};c()})}(),function(){c.register("qq",function(t,n){t.init=function(){loadScript("http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152",function(){var e="";$.os.ios?e=n.scheme:$.os.android&&(e=n.packageName),mqq.app.isAppInstalled(e,function(n){t.checkInstall.set(n?1:0)})})};var e=function(){var n=t.currentVersion=0;$.os.android?(n=function(t){return t&&t[1]||0}(navigator.userAgent.match(/V1_AND_SQ_([\d\.]+)/)),n?(t.currentVersion=n,t.checkIn.set(1)):t.checkIn.set(0)):$.os.ios?(n=function(t){return t&&t[1]||0}(navigator.userAgent.match(/Mobile\/[\d\w]+ QQ\/([\d\.]+)/)),n?(t.currentVersion=n,t.checkIn.set(1)):t.checkIn.set(0)):t.checkIn.set(0)};e()})}(),function(){c.register("qqbrowser",function(t,n){t.init=function(){try{if($.os.android){var e=window.x5mtt.isApkInstalled(JSON.stringify({packagename:n.packageName}));t.checkInstall.set(-1!=e?1:0)}else t.checkInstall.set($.os.ios?0:0)}catch(i){t.checkInstall.set(0)}};var e=function(){var n=function(t){return t&&t[1]||0}(navigator.userAgent.match(/MQQBrowser\/([\d\.]+)/));t.checkIn.set(n?1:0)};e()})}(),function(){function t(t,n){iframe=document.createElement("iframe"),iframe.style.display="none",iframe.src=t;var e=function(t){try{iframe.parentNode.removeChild(iframe)}catch(e){}n&&n()};iframe.onload=e,document.documentElement.appendChild(iframe)}function n(){this.callbackDict={},this.notificationIdCount=0,this.notificationDict={};var n=this;n.bind("jsBridgeReady",function(){n.ready=!0}),t("jsbridge://NotificationReady",n.trigger("jsBridgeReady",{}))}n.prototype={constructor:n,postNotification:function(n,e){this.notificationIdCount++,this.notificationDict[this.notificationIdCount]={name:n,userInfo:e},t("jsbridge://PostNotificationWithId-"+this.notificationIdCount)},popNotificationObject:function(t){var n=JSON.stringify(this.notificationDict[t]);return delete this.notificationDict[t],n},trigger:function(t,n){if(this.callbackDict[t])for(var e=this.callbackDict[t],i=0,c=e.length;c>i;i++)e[i](n)},bind:function(t,n){this.callbackDict[t]||(this.callbackDict[t]=[]),this.callbackDict[t].push(n)},unbind:function(t,n){if(1==arguments.length)delete this.callbackDict[t];else if(arguments.length>1){if(this.callbackDict[t])for(var e=this.callbackDict[t],i=0,c=e.length;c>i;i++)if(e[i]==n){e.splice(i,1);break}0==this.callbackDict[t].length&&delete this.callbackDict[t]}}},c.register("qqnews",function(t,e){var i=function(){t.jsBridge.bind("getInstallState",function(n){if(t.checkInstallTimeout){clearTimeout(t.checkInstallTimeout),t.checkInstallTimeout=null;var e=n.installed;e=e?1:0,t.checkIn.set(1),t.checkInstall.set(e)}})};t.init=function(){jsBridge.ready?i():jsBridge.bind("jsBridgeReady",i),jsBridge.postNotification("getInstallState",{package_url:e.packageUrl})};var c=function(){$.os.android?t.checkIn.set(window.TencentNewsScript?1:0):$.os.ios?/Safari/.test(navigator.userAgent)?t.checkIn.set(0):(jsBridge=new n,t.checkInstallTimeout=setTimeout(function(){t.checkInstallTimeout=null,t.checkIn.set(0)},3e3)):t.checkIn.set(0)};c()})}();var o=function(){var t,n,e,i=function(e,i){1==t?i.openClient(e):-1==t?i.download(n.downloadUrl):location.href=n.downloadUrl};return function(o,a){n=a,t?i(o,e):c.getChecker(n,function(n){n?n.checkInstall.on(function(n){t=n?1:-1}):t=0,e=n,i(o,n)})}}(),a={downloadUrl:$.os.ios?"http://itunes.apple.com/cn/app/id370130751":"http://www.myapp.com/down/2394?&g_f=190506",packageUrl:"TencentWeibo://",packageName:"com.tencent.WBlog",scheme:"tencentweibo"},r={downloadUrl:$.os.ios?"https://itunes.apple.com/cn/app/gou-che-tong/id935183922?mt=8":"http://mct.auto.qq.com/index.php?mod=download",packageUrl:"qqcar://",packageName:"com.tencent.qqcar",scheme:"qqcar"};$.os.android&&window.entry?"page.vote"==window.entry&&(r.downloadUrl+="&channelid=wenwen"):r.downloadUrl+="&channelid=chuping",exports.manager=c,exports.CheckerManger=n,exports.openClient=o,exports.packageInfo={weibo:a,qqcar:r},exports.pkg={WEIBOPKG:a,QQCARPKG:r}});